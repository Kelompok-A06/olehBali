{% extends 'base.html' %}
{% load static %}

{% block meta %}
<style>
  body {
    background: linear-gradient(45deg, #FE9642, #ffbe98);
    min-height: 100vh;
  }
  
  .menu .active {
    background-color: #03A4C1 !important;
    color: white !important;
  }
  
  .custom-shadow {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  }
  
  .input {
    color: #000; /* Pastikan teks hitam untuk kontras */
  }
</style>
{% endblock meta %}

{% block content %}
{% include 'navbar.html' %}

<div class="container mx-auto p-4 min-h-screen">
  <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
    <!-- Sidebar -->
    <div class="bg-white rounded-2xl custom-shadow p-6">
      <h3 class="text-xl font-bold mb-4 text-gray-800">My Account</h3>
      <ul class="menu bg-base-200 rounded-xl">
        <li><a href="{% url 'userprofile:dashboard' user.pk %}" class="active mb-2 hover:bg-[#03A4C1] hover:text-white">Account Information</a></li>
        {% if show_wishlist %}
          <li><a href="{% url 'userprofile:wishlist_dashboard'  %}" class="hover:bg-[#03A4C1] hover:text-white">My Wishlist</a></li>
        {% endif %}
      </ul>
      <form method="POST" action="{% url 'userprofile:delete_account' %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-error w-full mt-6 text-white">Delete Account</button>
      </form>
    </div>

    <!-- Main Content -->
    <div class="md:col-span-3 bg-white rounded-2xl custom-shadow p-6">
      <h2 class="text-2xl font-bold mb-6 text-gray-800">Account Information</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Profile Section -->
        <div class="bg-gray-50 p-6 rounded-xl">
          <h3 class="font-bold mb-4 text-gray-700">Information</h3>
          <div class="flex flex-col items-center">
            <div class="avatar mb-4">
              <div class="w-24 h-24 rounded-full">
                {% if profile.avatar %}
                    <img src="{{ profile.avatar.url }}" alt="Profile Avatar" />
                {% else %}
                    <img src="{% static 'avatars/default_avatar.png' %}" alt="Default Avatar" />
                {% endif %}
              </div>
            </div>
            <a href="{% url 'userprofile:edit_profile' %}" class="text-[#03A4C1] hover:text-[#FE9642] transition-colors duration-300 underline">
              Edit Profile
            </a>
          </div>
        </div>

        <!-- Form Fields -->
        <div class="space-y-4">
          <div class="form-control">
            <label class="label">
              <span class="label-text font-bold">Name*</span>
            </label>
            <input type="text" value="{{ profile.name }}" class="input input-bordered focus:border-[#03A4C1]" disabled />
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-bold">Phone Number*</span>
            </label>
            <input type="tel" value="{{ profile.phone_number }}" class="input input-bordered focus:border-[#03A4C1]" disabled />
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-bold">Email*</span>
            </label>
            <input type="email" value="{{ profile.email }}" class="input input-bordered focus:border-[#03A4C1]" disabled />
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-bold">Birthdate*</span>
            </label>
            <input type="date" value="{{ profile.birthdate|date:'Y-m-d' }}" class="input input-bordered focus:border-[#03A4C1]" disabled />
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="mt-6 flex justify-end">
        {% if profile.user.role == 'user' %}
          <!-- Hanya tampilkan tombol wishlist jika role adalah 'user' -->
          <a href="{% url 'userprofile:wishlist_dashboard' %}" 
             class="btn bg-[#03A4C1] hover:bg-[#028091] text-white border-none">
            Wishlist Dashboard
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock content %}
