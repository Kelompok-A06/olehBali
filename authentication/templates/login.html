{% extends 'base.html' %}

{% block meta %}
<title>Login/Signup</title>
{% endblock meta %}

{% block content %}
<div class="login-container">
    <!-- Login Form -->
    <div id="login-form">
        <h2>Login Form</h2>

        <div class="tab-buttons">
            <button class="tab-btn active" onclick="showLogin()">Login</button>
            <button class="tab-btn" onclick="showSignup()">Signup</button>
        </div>

        <form method="POST" action="">
            {% csrf_token %}
            <div class="form-group">
                <input type="text" name="username" placeholder="Username" required>
            </div>
            <div class="form-group">
                <input type="password" name="password" placeholder="Password" required>
            </div>
            <button type="submit" class="submit-btn" name="login">Login</button>
            <div class="signup-link">
                <p>Not a member? <a href="#" onclick="showSignup()">Signup now!</a></p>
            </div>
        </form>
    </div>

    <!-- Signup Form -->
    <div id="signup-form" class="hidden">
        <h2>Signup Form</h2>

        <div class="tab-buttons">
            <button class="tab-btn" onclick="showLogin()">Login</button>
            <button class="tab-btn active" onclick="showSignup()">Signup</button>
        </div>

        <form method="POST" action="">
            {% csrf_token %}
            <div class="form-group">
                <input type="text" name="username" placeholder="Username" required>
                {% if register_form.username.errors %}
                    <div class="error">{{ register_form.username.errors.0 }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                <input type="password" name="password1" placeholder="Password" required>
                {% if register_form.password1.errors %}
                    <div class="error">{{ register_form.password1.errors.0 }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                <input type="password" name="password2" placeholder="Confirm password" required>
                {% if register_form.password2.errors %}
                    <div class="error">{{ register_form.password2.errors.0 }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                <select name="role" required>
                    <option value="" disabled selected>Role</option>
                    <option value="user">User</option>
                    <option value="owner">Owner</option>
                </select>
                {% if register_form.role.errors %}
                    <div class="error">{{ register_form.role.errors.0 }}</div>
                {% endif %}
            </div>
            <button type="submit" class="submit-btn" name="register">Signup</button>
        </form>
    </div>
</div>

<script>
function showLogin() {
    document.getElementById('login-form').classList.remove('hidden');
    document.getElementById('signup-form').classList.add('hidden');
}

function showSignup() {
    document.getElementById('login-form').classList.add('hidden');
    document.getElementById('signup-form').classList.remove('hidden');
}
</script>
{% endblock content %}